# 有道翻译接口(2018/4/24)


## 分析有道翻译
***网址(http://fanyi.youdao.com/)***

***
![Genral and Response Headers](https://github.com/Harrdy2018/Python3-Crawl/blob/master/YouDao%20Translation/youdaoA.bmp)
***
* 抓包工具第一张图片分析，提取有用信息<br>
***Requst URL:  http://fanyi.youdao.com/translate?smartresult=dict&smartresult=rule***
```
Request URL: http://fanyi.youdao.com/translate_o?smartresult=dict&smartresult=rule
虽然这是浏览器给我们的反馈，但是我自己在做的过程中，用这个链接一直出现错误，所以我最后选择下面链接作为我的URL,原因我目前不清楚！！！
Requst URL:  http://fanyi.youdao.com/translate?smartresult=dict&smartresult=rule
```
***Request Method: POST***


***
![Form Data](https://github.com/Harrdy2018/Python3-Crawl/blob/master/YouDao%20Translation/youdaoB.bmp)
***
* 抓包工具第二张图片分析，提取有用信息<br>
***表单数据是我们的有用信息***
```
i: hello
from: AUTO
to: AUTO
smartresult: dict
client: fanyideskweb
salt: 1524572637253
sign: 5cbd25120c64848d4846a8e94700139e
doctype: json
version: 2.1
keyfrom: fanyi.web
action: FY_BY_CLICKBUTTION
typoResult: false
```
**我们经过反复测试发现，表单中的salt和sign值是一直在变化的，所以爬虫的关键在于如何求这两个值**

***
![从js中查找salt和sign](https://github.com/Harrdy2018/Python3-Crawl/blob/master/YouDao%20Translation/youdaoC.bmp)
***
* 抓包工具第三张图片分析，提取有用信息<br>
**寻找加密的js文件**<br>
经过一番查找后发现了我们需要的js文件,如下所示:<br>
`<script type="text/javascript" src="http://shared.ydstatic.com/fanyi/newweb/v1.0.9/scripts/newweb/fanyi.min.js"></script>`

***
* 处理错乱的js代码
***
![在线代码格式化](https://github.com/Harrdy2018/Python3-Crawl/blob/master/YouDao%20Translation/%E5%9C%A8%E7%BA%BF%E4%BB%A3%E7%A0%81%E6%A0%BC%E5%BC%8F%E5%8C%96.png)
***
***在线代码格式化***(http://tool.oschina.net/codeformat/js)
